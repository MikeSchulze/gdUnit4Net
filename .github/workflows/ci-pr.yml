# Main CI workflow with .NET matrix - calls ci-core.yml for each .NET version
name: ci-pr
run-name: ${{ github.head_ref || github.ref_name }}-ci-pr

on:
  pull_request:
    paths-ignore:
      - '**.jpg'
      - '**.png'
      - '**.md'
  workflow_dispatch:

concurrency:
  group: ci-pr-${{ github.event.number }}
  cancel-in-progress: true

jobs:

  test-matrix:
    strategy:
      fail-fast: false
      matrix:
        dotnet-version:
          - '7.0.410'
          - '8.0.410'
        include:
          - dotnet-version: '7.0.410'
            dotnet-major: '7'
          - dotnet-version: '8.0.410'
            dotnet-major: '8'

    name: "🔧 .NET ${{ matrix.dotnet-major }} Pipeline"
    uses: ./.github/workflows/ci-core.yml
    with:
      dotnet-version: ${{ matrix.dotnet-version }}
      dotnet-major: ${{ matrix.dotnet-major }}
